<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Opiniones Anónimas Online</title>
    <style>
        body { font-family: Arial, sans-serif; background: #fafafa;}
        .container { max-width: 500px; margin: 30px auto; background: #fff; border-radius: 6px; box-shadow: 1px 2px 10px #ccc; padding: 30px;}
        h1 { color: #cc2e2e; font-size: 1.7em; text-align: center;}
        textarea { width: 100%; height: 100px; padding: 10px; font-size: 1em;}
        button { background: #cc2e2e; color: #fff; border: none; padding: 10px 20px; border-radius: 3px; font-size: 1em; cursor: pointer;}
        .mensaje { background: #ffdedb; padding: 10px; margin: 10px 0 0 0; border-radius: 4px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>¿Qué no te gusta de mí? (Anónimo · Online)</h1>
        <form id="formulario">
            <textarea id="mensaje" placeholder="Escribe aquí tu opinión anónima..."></textarea>
            <button type="submit">Enviar</button>
        </form>
        <div id="mensajes"></div>
    </div>
    <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.6.8/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.8/firebase-firestore-compat.js"></script>
    <script>
        // Pega tu configuración de Firebase aquí:
        const firebaseConfig = {
            apiKey: "TU_API_KEY",
            authDomain: "TU_AUTH_DOMAIN",
            projectId: "TU_PROJECT_ID",
            storageBucket: "TU_STORAGE_BUCKET",
            messagingSenderId: "TU_MSG_ID",
            appId: "TU_APP_ID"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        const formulario = document.getElementById('formulario');
        const mensajesDiv = document.getElementById('mensajes');

        formulario.addEventListener('submit', async function(e) {
            e.preventDefault();
            const texto = document.getElementById('mensaje').value.trim();
            if (texto) {
                await db.collection('opiniones').add({
                    mensaje: texto,
                    fecha: new Date()
                });
                document.getElementById('mensaje').value = '';
            }
        });

        // Mostrar mensajes en tiempo real
        db.collection('opiniones').orderBy('fecha', 'desc').onSnapshot(snapshot => {
            mensajesDiv.innerHTML = "";
            snapshot.forEach(doc => {
                const dato = doc.data();
                const nuevoMensaje = document.createElement('div');
                nuevoMensaje.classList.add('mensaje');
                nuevoMensaje.innerText = dato.mensaje;
                mensajesDiv.appendChild(nuevoMensaje);
            });
        });
    </script>
</body>
</html>
